"""empty message

Revision ID: e698251973d7
Revises: 
Create Date: 2026-02-20 02:50:31.857047

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = 'e698251973d7'
down_revision = None
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('creditors',
    sa.Column('id', sa.UUID(), nullable=False),
    sa.Column('bank_code', sa.Enum('001', '003', '004', '007', '010', '011', '012', '014', '015', '016', '017', '018', '021', '024', '025', '029', '033', '036', '037', '040', '041', '047', '060', '062', '063', '064', '065', '066', '069', '070', '074', '075', '076', '077', '078', '079', '080', '081', '082', '083', '084', '085', '088', '089', '091', '092', '093', '094', '095', '096', '097', '098', '099', '100', '101', '102', '104', '105', '107', '108', '111', '113', '114', '117', '119', '120', '121', '122', '124', '125', '126', '127', '128', '129', '130', '131', '132', '133', '134', '136', '138', '139', '140', '141', '142', '143', '144', '145', '146', '149', '157', '159', '163', '173', '174', '177', '180', '183', '184', '188', '189', '190', '191', '194', '195', '196', '197', '208', '212', '213', '217', '218', '222', '224', '233', '237', '241', '243', '246', '249', '250', '253', '254', '259', '260', '265', '266', '268', '269', '270', '271', '272', '273', '274', '276', '278', '279', '280', '281', '283', '285', '286', '288', '289', '290', '292', '293', '296', '298', '299', '300', '301', '305', '306', '307', '309', '310', '311', '312', '313', '315', '318', '319', '320', '321', '322', '323', '324', '325', '326', '328', '329', '330', '331', '332', '334', '335', '336', '340', '341', '342', '343', '348', '349', '350', '352', '354', '355', '358', '359', '360', '362', '363', '364', '365', '366', '367', '368', '370', '371', '373', '374', '376', '377', '378', '379', '380', '381', '382', '383', '384', '385', '386', '387', '389', '390', '391', '393', '394', '395', '396', '397', '398', '399', '400', '401', '402', '403', '404', '406', '407', '408', '410', '411', '412', '413', '414', '415', '416', '418', '419', '421', '422', '423', '425', '426', '427', '428', '429', '430', '433', '435', '438', '439', '440', '442', '443', '444', '445', '447', '448', '449', '450', '451', '452', '454', '455', '456', '457', '458', '459', '460', '461', '462', '463', '464', '465', '467', '468', '469', '470', '471', '473', '475', '477', '478', '479', '481', '482', '484', '487', '488', '492', '495', '505', '506', '507', '508', '509', '510', '511', '512', '513', '514', '516', '518', '519', '520', '521', '522', '523', '524', '525', '526', '527', '528', '529', '530', '531', '532', '533', '534', '535', '536', '537', '538', '539', '540', '541', '542', '543', '544', '545', '546', '547', '548', '549', '550', '551', '552', '553', '554', '555', '556', '557', '558', '559', '560', '561', '562', '563', '565', '566', '567', '568', '569', '572', '575', '576', '577', '578', '579', '580', '581', '582', '583', '584', '585', '586', '587', '588', '589', '590', '591', '592', '593', '594', '595', '597', '599', '600', '604', '610', '611', '612', '613', '614', '615', '619', '620', '623', '626', '630', '632', '633', '634', '636', '637', '643', '644', '646', '651', '652', '653', '654', '655', '659', '660', '661', '662', '663', '664', '665', '666', '671', '674', '676', '707', '712', '719', '720', '739', '741', '743', '745', '746', '747', '748', '751', '752', '753', '754', '755', '756', '757', name='br_bank_enum'), nullable=False),
    sa.Column('interest_rate', sa.NUMERIC(precision=5, scale=2), nullable=True),
    sa.Column('fine_rate', sa.NUMERIC(precision=5, scale=2), nullable=True),
    sa.Column('discount_limit', sa.NUMERIC(precision=5, scale=2), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('bank_code')
    )
    op.create_table('debtors',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=150), nullable=False),
    sa.Column('document', sa.String(length=14), nullable=False),
    sa.Column('email', sa.String(length=150), nullable=True),
    sa.Column('phone', sa.String(length=20), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('document')
    )
    op.create_table('debts',
    sa.Column('id', sa.UUID(), nullable=False),
    sa.Column('debtor_id', sa.Integer(), nullable=False),
    sa.Column('creditor_id', sa.UUID(), nullable=False),
    sa.Column('original_value', sa.NUMERIC(precision=12, scale=2), nullable=False),
    sa.Column('updated_value', sa.NUMERIC(precision=12, scale=2), nullable=False),
    sa.Column('due_date', sa.Date(), nullable=False),
    sa.Column('status', sa.Enum('OPEN', 'IN_AGREEMENT', 'PAID', 'DEFAULTED', 'CANCELLED', name='debt_status_enum'), server_default='OPEN', nullable=False),
    sa.Column('renegotiation_count', sa.Integer(), nullable=True),
    sa.Column('last_agreement_date', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creditor_id'], ['creditors.id'], ),
    sa.ForeignKeyConstraint(['debtor_id'], ['debtors.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    with op.batch_alter_table('debts', schema=None) as batch_op:
        batch_op.create_index(batch_op.f('ix_debts_creditor_id'), ['creditor_id'], unique=False)
        batch_op.create_index(batch_op.f('ix_debts_debtor_id'), ['debtor_id'], unique=False)

    op.create_table('agreements',
    sa.Column('id', sa.UUID(), nullable=False),
    sa.Column('total_traded', sa.NUMERIC(precision=12, scale=2), nullable=False),
    sa.Column('installments_quantity', sa.Integer(), nullable=False),
    sa.Column('installment_value', sa.NUMERIC(precision=12, scale=2), nullable=False),
    sa.Column('entry_value', sa.NUMERIC(precision=12, scale=2), nullable=False),
    sa.Column('discount_applied', sa.NUMERIC(precision=12, scale=2), nullable=True),
    sa.Column('first_due_date', sa.Date(), nullable=False),
    sa.Column('status', sa.Enum('DRAFT', 'ACTIVE', 'CANCELLED', 'COMPLETED', name='agreementstatus'), server_default='DRAFT', nullable=False),
    sa.Column('debt_id', sa.UUID(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['debt_id'], ['debts.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    with op.batch_alter_table('agreements', schema=None) as batch_op:
        batch_op.create_index(batch_op.f('ix_agreements_debt_id'), ['debt_id'], unique=False)

    op.create_table('installments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('installment_number', sa.Integer(), nullable=False),
    sa.Column('due_date', sa.Date(), nullable=False),
    sa.Column('payment_date', sa.Date(), nullable=True),
    sa.Column('value', sa.NUMERIC(precision=12, scale=2), nullable=False),
    sa.Column('status', sa.Enum('PENDING', 'PAID', 'OVERDUE', 'CANCELLED', name='installment_status_enum'), nullable=False),
    sa.Column('agreement_id', sa.UUID(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['agreement_id'], ['agreements.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('installments')
    with op.batch_alter_table('agreements', schema=None) as batch_op:
        batch_op.drop_index(batch_op.f('ix_agreements_debt_id'))

    op.drop_table('agreements')
    with op.batch_alter_table('debts', schema=None) as batch_op:
        batch_op.drop_index(batch_op.f('ix_debts_debtor_id'))
        batch_op.drop_index(batch_op.f('ix_debts_creditor_id'))

    op.drop_table('debts')
    op.drop_table('debtors')
    op.drop_table('creditors')
    # ### end Alembic commands ###
